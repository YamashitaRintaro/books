## 単一責任の原則とは

単一責任の原則（Single Responsibility Principle, SRP）は、SOLID原則の中でも最も基本的かつ重要な原則の一つです。
この原則は、オブジェクト指向設計において、クラスやモジュールが一つの「責任」だけを持つべきだと述べています。

## なぜ単一責任が重要なのか

以下に、単一責任を守らないことによる問題点を4つの観点から説明します。

### 1. 保守性

- **変更が複雑になる**: クラスが複数の責任を持つと、特定の機能を変更するためにクラス全体を見直す必要が出てきます。その結果、変更が複雑になり、バグが発生しやすくなります。
- **メンテナンスが大変**: 複数の責任を持つクラスは、何をどこで変更すれば良いのか分かりにくいため、修正や追加が大変です。結果として、メンテナンスコストが増加します。

### 2. 再利用性

- **再利用が難しい**: 複数の責任を持つクラスは、特定のコンテキストに依存しやすく、他のプロジェクトで使い回しにくくなります。
- **コードの重複**: 再利用が難しいため、同じようなコードを別の場所で再度作成することになり、コードベースが重複して冗長になります。

### 3. テストのしやすさ

- **テストが複雑になる**: 複数の責任を持つクラスは、テスト範囲が広くなり、何をどうテストすれば良いのかが複雑になります。
- **テストの信頼性が下がる**: クラスが他の機能に依存していると、その依存関係も含めてテストする必要があり、テストが相互に依存しやすくなります。これにより、信頼性の高いテストが難しくなります。

### 4. 変更の影響範囲

- **変更の影響が広がる**: 複数の責任が絡み合ったクラスは、クラスの本来の目的とは関係ない理由で変更される可能性があります。
- **予期せぬ破壊**: 変更が加わるたびに、そのクラスに依存する全てのクラスが影響を受け、アプリケーションを予期せず壊してしまうことがあります。

本書では、特に問題4について重点的に書かれています。

### クラスが単一責任かどうかを見極める方法
クラスが単一責任かどうかを見極めるには、2つの方法があります。

1. あたかもそれに知覚があるかのように仮定して問いただす
「Gear さん、あなたの比を教えてくれませんか？」という質問はとてもしっくりきますね。
「Gear さん、あなたのgear_inches (またはタイヤのサイズ) を教えてくれませんか？」には違和感を感じませんか？

2. １文でクラスを説明してみる
できる限り短い説明に「それと」が含まれている場合、クラスは2つ以上の責任を負っている可能性が高いです。
「または」が含まれている場合、そのクラスの責任は2つ以上であるだけでなく、互いに関連もしない責任を負っているでしょう。

具体的な例を見てみましょう。
- 「Userクラスは、ユーザーの情報を管理する」という説明はシンプルで、単一責任であると言えるでしょう。
- 「Orderクラスは、注文の詳細を保存し、それと支払いの処理を行う」という説明には「それと」が含まれており、注文の詳細を保存する責任と支払いの処理を行う責任の2つを持っていることが示唆されます。
- 「ReportGeneratorクラスは、レポートを生成し、またはデータを分析する」という説明には「または」が含まれており、2つの異なる責任（レポートの生成とデータの分析）を持っていることが明らかです。

